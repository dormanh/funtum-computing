import{S as ue,i as fe,s as he,e as O,b as p,n as Y,h,$ as I,a as q,a0 as Q,p as d,c as z,q as n,u as F,v as P,H as x,w as ye,l as D,U as G,m as J,V as U,f as T,d as ge,t as $,P as te,x as be,y as pe,z as ve,C as ke,g as Ee}from"../chunks/index-ca49edcf.js";import{q as we,I as de,B as ee,A as Ce,m as K,S as le,J as N}from"../chunks/index-ba7e8b36.js";import{Q as ce,c as L,p as se,r as Ie}from"../chunks/qgates-46947dcc.js";class Qe{constructor(){this.measured=""}}class _e{constructor(){this.transforms=[],this.usedInds=[],this.entangleRanges=[],this.conflicts=e=>{let s=!1;return e.forEach(l=>{this.usedInds.includes(l)&&(s=!0)}),s},this.betweenEntangles=e=>{let s=!1;return e.forEach(l=>{this.entangleRanges.forEach(i=>{i[0]<l&&i[1]>l&&(s=!0)})}),s},this.extend=e=>{this.transforms.push(e),this.usedInds.push(...e.qubitIndices),e instanceof ce&&e.isMulti()&&this.entangleRanges.push([we(e.qubitIndices),de(e.qubitIndices)])}}}function xe(a){let e=[],s;return a.forEach(l=>{s=e.length;for(let i=e.length-1;i>=0&&!e[i].conflicts(l.qubitIndices);i--)e[i].betweenEntangles(l.qubitIndices)||(s=i);s==e.length&&e.push(new _e),e[s].extend(l)}),e}function qe(a,e){let s=[a.map(t=>new ee(t))],l=a;return xe(e).forEach(t=>{s.push(t),t.transforms.forEach(r=>{r instanceof ce&&(r.isMulti()||r.qubitIndices.forEach(g=>{l[g]=Ce(l[g],[r.mat])}))}),s.push(l.map(r=>new ee(r)))}),s}class ze{constructor(e,s){this.iterateElement=()=>{let l=[];return this.layers.forEach((i,t)=>{if(i instanceof _e)for(let r=0;r<this.qubits;r++){let g="pass";i.transforms.forEach(v=>{v.qubitIndices.includes(r)&&(g=v.name)}),l.push({i:t,j:r,elem:g})}else i.forEach((r,g)=>{l.push({i:t,j:g,elem:r})})}),l},this.layers=qe(e,s),this.qubits=e.length,this.layerCount=this.layers.length}}function Se(a){let e,s,l,i=a[2]!="pass"&&ie(a);return{c(){e=I("line"),s=q(),i&&i.c(),l=O(),this.h()},l(t){e=Q(t,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,class:!0}),d(e).forEach(h),s=z(t),i&&i.l(t),l=O(),this.h()},h(){n(e,"x1","0.7"),n(e,"x2","0.7"),n(e,"y1","-0.9"),n(e,"y2","1.9"),n(e,"stroke","black"),n(e,"class","svelte-cnhg6y")},m(t,r){p(t,e,r),p(t,s,r),i&&i.m(t,r),p(t,l,r)},p(t,r){t[2]!="pass"?i?i.p(t,r):(i=ie(t),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(t){t&&h(e),t&&h(s),i&&i.d(t),t&&h(l)}}}function Be(a){let e;return{c(){e=I("line"),this.h()},l(s){e=Q(s,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,class:!0}),d(e).forEach(h),this.h()},h(){n(e,"x1","0.7"),n(e,"x2","0.7"),n(e,"y1","-0.9"),n(e,"y2","1.9"),n(e,"stroke","pink"),n(e,"class","svelte-cnhg6y")},m(s,l){p(s,e,l)},p:Y,d(s){s&&h(e)}}}function He(a){let e,s,l,i,t,r,g,v,m,S,C,k,_,B,E;return{c(){e=I("line"),i=q(),t=I("line"),v=q(),m=I("line"),k=q(),_=I("circle"),B=q(),E=I("rect"),this.h()},l(o){e=Q(o,"line",{y2:!0,stroke:!0,class:!0}),d(e).forEach(h),i=z(o),t=Q(o,"line",{y1:!0,y2:!0,stroke:!0,class:!0}),d(t).forEach(h),v=z(o),m=Q(o,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,class:!0}),d(m).forEach(h),k=z(o),_=Q(o,"circle",{cx:!0,cy:!0,r:!0,class:!0}),d(_).forEach(h),B=z(o),E=Q(o,"rect",{x:!0,y:!0,rx:!0,ry:!0,width:!0,height:!0,class:!0}),d(E).forEach(h),this.h()},h(){n(e,"y2",s=a[2].ketZeroChance()),n(e,"stroke",l=a[0][0]),n(e,"class","svelte-cnhg6y"),n(t,"y1",r=1-a[2].ketOneChance()),n(t,"y2","1"),n(t,"stroke",g=a[0][1]),n(t,"class","svelte-cnhg6y"),n(m,"x1","1"),n(m,"x2",S=1+a[2].phiX()*.5),n(m,"y1","0.5"),n(m,"y2",C=.5+a[2].phiY()*.5),n(m,"stroke",a[1]),n(m,"class","svelte-cnhg6y"),n(_,"cx","1"),n(_,"cy","0.5"),n(_,"r","0.5"),n(_,"class","svelte-cnhg6y"),n(E,"x","-0.2"),n(E,"y","-0.1"),n(E,"rx","0.1"),n(E,"ry","0.1"),n(E,"width","1.8"),n(E,"height","1.2"),n(E,"class","bloch-wrap svelte-cnhg6y")},m(o,b){p(o,e,b),p(o,i,b),p(o,t,b),p(o,v,b),p(o,m,b),p(o,k,b),p(o,_,b),p(o,B,b),p(o,E,b)},p(o,b){b&4&&s!==(s=o[2].ketZeroChance())&&n(e,"y2",s),b&1&&l!==(l=o[0][0])&&n(e,"stroke",l),b&4&&r!==(r=1-o[2].ketOneChance())&&n(t,"y1",r),b&1&&g!==(g=o[0][1])&&n(t,"stroke",g),b&4&&S!==(S=1+o[2].phiX()*.5)&&n(m,"x2",S),b&4&&C!==(C=.5+o[2].phiY()*.5)&&n(m,"y2",C),b&2&&n(m,"stroke",o[1])},d(o){o&&h(e),o&&h(i),o&&h(t),o&&h(v),o&&h(m),o&&h(k),o&&h(_),o&&h(B),o&&h(E)}}}function ie(a){let e,s,l,i;return{c(){e=I("rect"),s=q(),l=I("text"),i=F(a[2]),this.h()},l(t){e=Q(t,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0}),d(e).forEach(h),s=z(t),l=Q(t,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var r=d(l);i=P(r,a[2]),r.forEach(h),this.h()},h(){n(e,"x","0"),n(e,"y","0"),n(e,"width","1.4"),n(e,"height","0.8"),n(e,"class","mod-wrap svelte-cnhg6y"),n(l,"x","0.7"),n(l,"y","0.5"),n(l,"text-anchor","middle"),n(l,"class","svelte-cnhg6y")},m(t,r){p(t,e,r),p(t,s,r),p(t,l,r),x(l,i)},p(t,r){r&4&&ye(i,t[2])},d(t){t&&h(e),t&&h(s),t&&h(l)}}}function je(a){let e;function s(t,r){return t[2]instanceof ee?He:typeof t[2]===Qe?Be:Se}let l=s(a),i=l(a);return{c(){i.c(),e=O()},l(t){i.l(t),e=O()},m(t,r){i.m(t,r),p(t,e,r)},p(t,[r]){l===(l=s(t))&&i?i.p(t,r):(i.d(1),i=l(t),i&&(i.c(),i.m(e.parentNode,e)))},i:Y,o:Y,d(t){i.d(t),t&&h(e)}}}function Ae(a,e,s){let{colors:l=["#4682B4","#FA8072"]}=e,{phiColor:i="purple"}=e,{elem:t}=e;return a.$$set=r=>{"colors"in r&&s(0,l=r.colors),"phiColor"in r&&s(1,i=r.phiColor),"elem"in r&&s(2,t=r.elem)},[l,i,t]}class Re extends ue{constructor(e){super(),fe(this,e,Ae,je,he,{colors:0,phiColor:1,elem:2})}}function re(a,e,s){const l=a.slice();return l[10]=e[s],l}function ne(a,e,s){const l=a.slice();return l[13]=e[s],l[15]=s,l}function ae(a){let e,s;return{c(){e=I("text"),s=F(a[15]),this.h()},l(l){e=Q(l,"text",{"font-size":!0,"text-anchor":!0,x:!0,y:!0});var i=d(e);s=P(i,a[15]),i.forEach(h),this.h()},h(){n(e,"font-size","0.5"),n(e,"text-anchor","middle"),n(e,"x",a[15]*3+.7),n(e,"y","-1")},m(l,i){p(l,e,i),x(e,s)},p:Y,d(l){l&&h(e)}}}function oe(a){let e,s,l,i;return s=new Re({props:{elem:a[10].elem,phiColor:a[1],colors:a[0]}}),{c(){e=I("g"),be(s.$$.fragment),this.h()},l(t){e=Q(t,"g",{transform:!0});var r=d(e);pe(s.$$.fragment,r),r.forEach(h),this.h()},h(){n(e,"transform",l=`translate(${a[10].j*3}, ${a[10].i*2})`)},m(t,r){p(t,e,r),ve(s,e,null),i=!0},p(t,r){const g={};r&8&&(g.elem=t[10].elem),r&2&&(g.phiColor=t[1]),r&1&&(g.colors=t[0]),s.$set(g),(!i||r&8&&l!==(l=`translate(${t[10].j*3}, ${t[10].i*2})`))&&n(e,"transform",l)},i(t){i||(T(s.$$.fragment,t),i=!0)},o(t){$(s.$$.fragment,t),i=!1},d(t){t&&h(e),ke(s)}}}function Le(a){let e,s,l,i=K("\\varphi")+"",t,r,g=K("\\pi")+"",v,m,S=K("q_{1}")+"",C,k,_,B,E,o,b,X,Z,V,j,M=Array(a[3].qubits),w=[];for(let u=0;u<M.length;u+=1)w[u]=ae(ne(a,M,u));let A=a[3].iterateElement(),y=[];for(let u=0;u<A.length;u+=1)y[u]=oe(re(a,A,u));const me=u=>$(y[u],1,1,()=>{y[u]=null});return{c(){e=D("div"),s=F(`Operations

	`),l=new G(!1),t=q(),r=new G(!1),v=q(),m=new G(!1),C=q(),k=D("main"),_=D("h1"),B=F("Quantum Register"),E=q(),o=I("svg");for(let u=0;u<w.length;u+=1)w[u].c();b=O();for(let u=0;u<y.length;u+=1)y[u].c();this.h()},l(u){e=J(u,"DIV",{class:!0});var c=d(e);s=P(c,`Operations

	`),l=U(c,!1),t=z(c),r=U(c,!1),v=z(c),m=U(c,!1),c.forEach(h),C=z(u),k=J(u,"MAIN",{});var f=d(k);_=J(f,"H1",{});var H=d(_);B=P(H,"Quantum Register"),H.forEach(h),E=z(f),o=Q(f,"svg",{height:!0,width:!0,viewBox:!0});var W=d(o);for(let R=0;R<w.length;R+=1)w[R].l(W);b=O();for(let R=0;R<y.length;R+=1)y[R].l(W);W.forEach(h),f.forEach(h),this.h()},h(){l.a=t,r.a=v,m.a=null,n(e,"class","sidebar"),n(o,"height",X=a[2]*a[4]),n(o,"width",Z=a[2]*a[5]),n(o,"viewBox",V="-1 -3 "+a[5]+" "+a[4])},m(u,c){p(u,e,c),x(e,s),l.m(i,e),x(e,t),r.m(g,e),x(e,v),m.m(S,e),p(u,C,c),p(u,k,c),x(k,_),x(_,B),x(k,E),x(k,o);for(let f=0;f<w.length;f+=1)w[f].m(o,null);x(o,b);for(let f=0;f<y.length;f+=1)y[f].m(o,null);j=!0},p(u,[c]){if(c&8){M=Array(u[3].qubits);let f;for(f=0;f<M.length;f+=1){const H=ne(u,M,f);w[f]?w[f].p(H,c):(w[f]=ae(H),w[f].c(),w[f].m(o,b))}for(;f<w.length;f+=1)w[f].d(1);w.length=M.length}if(c&11){A=u[3].iterateElement();let f;for(f=0;f<A.length;f+=1){const H=re(u,A,f);y[f]?(y[f].p(H,c),T(y[f],1)):(y[f]=oe(H),y[f].c(),T(y[f],1),y[f].m(o,null))}for(Ee(),f=A.length;f<y.length;f+=1)me(f);ge()}(!j||c&20&&X!==(X=u[2]*u[4]))&&n(o,"height",X),(!j||c&36&&Z!==(Z=u[2]*u[5]))&&n(o,"width",Z),(!j||c&48&&V!==(V="-1 -3 "+u[5]+" "+u[4]))&&n(o,"viewBox",V)},i(u){if(!j){for(let c=0;c<A.length;c+=1)T(y[c]);j=!0}},o(u){y=y.filter(Boolean);for(let c=0;c<y.length;c+=1)$(y[c]);j=!1},d(u){u&&h(e),u&&h(C),u&&h(k),te(w,u),te(y,u)}}}function Me(a,e,s){let l,i,t;const r=new le(N(1,0),N(0,0)),g=new le(N(0,0),N(1,0));let{initialQbits:v=[r,g,g,r]}=e,{transformations:m=[L.H([0,1,3]),se(.432,[1]),L.X([2]),L.Y([0]),L.Z([3]),L.SWAP([2,3]),L.X([1]),se(1.19,[0]),L.Z([0]),Ie(.876,[1])]}=e,{colors:S=["#4682B4","#FA8072"]}=e,{phiColor:C="purple"}=e,{objSize:k=50}=e;return a.$$set=_=>{"initialQbits"in _&&s(6,v=_.initialQbits),"transformations"in _&&s(7,m=_.transformations),"colors"in _&&s(0,S=_.colors),"phiColor"in _&&s(1,C=_.phiColor),"objSize"in _&&s(2,k=_.objSize)},a.$$.update=()=>{a.$$.dirty&192&&s(3,l=new ze(v,m)),a.$$.dirty&8&&s(5,i=3*l.qubits+1),a.$$.dirty&8&&s(4,t=2*l.layerCount+4)},[S,C,k,l,t,i,v,m]}class Ve extends ue{constructor(e){super(),fe(this,e,Me,Le,he,{initialQbits:6,transformations:7,colors:0,phiColor:1,objSize:2})}}export{Ve as default};
